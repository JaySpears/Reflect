"use strict";!function(i){i(document).ready(function(){function t(){i(".no-products").hide(),i(".pagination-wrapper").remove(),i("#loader").show(),i(".products").hide(),i.ajax({url:"/api/"+s.val(),method:"GET",success:function(t){i("#loader").hide(),i(".products").show();var s=t,e="";i(".products").empty();for(var o=0;o<s.products.length;o++){e+=void 0!=a?'<div class="col-md-4"><div class="image-wrapper"><div class="vertically-align"><img class="zoom" src="'+s.products[o].image.sizes.Best.url+'" data-magnify-src="'+s.products[o].image.sizes.Best.url+'" alt="Product Image" /></div></div><p class="product-name">'+s.products[o].name+"</p><p><i>"+s.products[o].priceLabel+'</i> | <a class="buy-link" target="_blank" href="'+s.products[o].pageUrl+'"><b>Buy Now!</b></a></p><p><a href="#" class="wishlist">Add to Wishlist!</a></p></div>':'<div class="col-md-4"><div class="image-wrapper"><div class="vertically-align"><img class="zoom" src="'+s.products[o].image.sizes.Best.url+'" data-magnify-src="'+s.products[o].image.sizes.Best.url+'" alt="Product Image" /></div></div><p class="product-name">'+s.products[o].name+"</p><p><i>"+s.products[o].priceLabel+'</i> | <a class="buy-link" target="_blank" href="'+s.products[o].pageUrl+'">Buy Now!</a></p></div>'}i(".products").html(e);var r=i(".products > div");if(0==r.length)i(".no-products").show();else{for(var o=0;o<r.length;o+=3)r.slice(o,o+3).wrapAll("<div class='row'></div>");i(".zoom").magnify(),i(".products").easyPaginate({paginateElement:i(".products > div"),elementsPerPage:3,effect:"default"}),i(".easyPaginateNav").wrap('<div class="pagination-wrapper"></div>'),i(".easyPaginateNav a").on("click",function(t){t.preventDefault(),i(".zoom").magnify()}),i(".pagination-wrapper").insertBefore("footer")}},error:function(t){i("#loader").hide(),console.log(t.statusText)}}).then(function(){i(".zoom").magnify();var t=i(".wishlist");t.on("click",function(t){console.log("clicked"),t.preventDefault();var s=i(this).parent().parent(),e={wishListImage:s.find("img").attr("src"),wishListProduct:s.find(".product-name").html(),wishListProductPrice:s.find("i").html(),wishListProductUrl:s.find(".buy-link").attr("href")};console.log(e),i.ajax({url:"/api/add-wishlist",method:"POST",data:e,success:function(i){console.log("Product pushed to Wishlist table.")}})})})}var s=(i(window).width(),i('input[name="keyword"]')),e=i('button[name="keyword"]'),a=Cookies.get("Current_Facebook_User");if("_=_"===window.location.hash&&(window.location.hash=""),s.typed({strings:["Snapbacks"],typeSpeed:20}),s.keypress(function(i){13==i.which&&t()}),e.on("click",function(){t()}),i(".close-modal").on("click",function(){i(".wishlist-wrapper").hide(),i("body").removeClass("wishlist-open")}),i(".products").easyPaginate({paginateElement:i(".products > div"),elementsPerPage:3,effect:"default"}),i(".easyPaginateNav").wrap('<div class="pagination-wrapper"></div>'),i(".easyPaginateNav a").on("click",function(t){if(console.log("yes"),i(".zoom").magnify(),t.preventDefault(),i(window).width()<=767&&(console.log("true"),i("body, html").animate({scrollTop:i("body").offset().top-10},700)),void 0!=a){var s=i(".wishlist");s.html("Add to Wishlist!"),s.on("click",function(t){t.preventDefault();var s=i(this).parent().parent(),e={wishListImage:s.find("img").attr("src"),wishListProduct:s.find(".product-name").html(),wishListProductPrice:s.find("i").html(),wishListProductUrl:s.find(".buy-link").attr("href")};i.ajax({url:"/api/add-wishlist",method:"POST",data:e,success:function(i){console.log("Product pushed to Wishlist table.")}})})}}),i(".pagination-wrapper").insertBefore("footer"),i(".zoom").magnify(),void 0!=a){var o=a.split(" "),r=i(".wishlist"),l=i(".login-nav a");i(".login-nav").addClass("fb"),l.html("What's up "+o[0]+'! <a href="#">Click here to check out your Wishlist!').attr("href","#"),r.html("Add to Wishlist!"),r.on("click",function(t){t.preventDefault();var s=i(this).parent().parent(),e={wishListImage:s.find("img").attr("src"),wishListProduct:s.find(".product-name").html(),wishListProductPrice:s.find("i").html(),wishListProductUrl:s.find(".buy-link").attr("href")};i.ajax({url:"/api/add-wishlist",method:"POST",data:e,success:function(i){console.log("Product pushed to Wishlist table.")}})}),l.on("click",function(){i.ajax({url:"/api/wishlist/get-wishlist",method:"GET",success:function(t){console.log(t);var s="";if(0!=t.length){i(".no-items").hide();for(var e=0;e<t.length;e++)s+='<div class="col-md-12" data-id="'+t[e].id+'"><div class="col-md-4"><img style="max-width: 100px" src="'+t[e].product_image_src+'"></div><div class="col-md-8"><p>'+t[e].product_title+"</p><p><i>"+t[e].product_price+'</i> | <a target="_blank" href="'+t[e].product_url+'"> <b>Buy Now</b></a></p><p class="remove-wishlist-item">Remove</p></div></div>'}else i(".no-items").show();i(".wishlist-wrapper").show(),i("body").addClass("wishlist-open"),i(".wishlist-modal .products-wrapper").html(""),i(".wishlist-modal .products-wrapper").append(s)}}).then(function(){var t=i(".remove-wishlist-item");t.on("click",function(){var t=i(this).parent().parent(),s=i(this).parent().parent().data("id");t.remove(),0==i(".wishlist-modal .products-wrapper div").length&&i(".no-items").show(),i.ajax({url:"/api/remove/wishlist/product",method:"POST",data:{pid:s},success:function(i){console.log("Product removed from Wishlist table.")},error:function(i){console.log(i)}})})})})}})}(jQuery);